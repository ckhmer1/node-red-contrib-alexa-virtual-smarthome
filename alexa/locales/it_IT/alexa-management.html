<script type="text/html" data-help-name="alexa-management">
    <p>Permette di gestire i servisi della domotica di Alexa.</p>

    <h3>Messaggi in ingresso</h3>
        <dl class="message-properties">
            <dt>topic
                <span class="property-type">stringa</span>
            </dt>
            <dd>Comando da eseguire. Può essere restartServer, reportState, getState o setState.</dd>
        </dl>

     <h3>Messaggi in uscita</h3>
        <dl class="message-properties">
            <dt>payload
                <span class="property-type">ogetto</span>
            </dt>
            <dd>Lo stato di tutti i dispositivi Alexa (con il payload valorizzato a setState o getState topic).</dd>
        </dl>

    <h3>Dettagli</h3>
        <h4>Propertà del nodo - Impostazioni domotica di Alexa</h4>
        <p><code>Alexa</code> Node di configurazione.</p>
        <h4>Propertà del nodo - Impostazioni di Node-RED</h4>
        <p><code>Nome</code> Nome usato dalla domitica di Alexa.</p>

        <h4>Messaggi in ingresso</h4>
        <p>Se il <code>msg.topic</code> è <code>restartServer</code>, il nodo riavvierà il server Web interno. Può essere usato se i certificati SSL sono stati rinnovati ed è necessario che il server WEB li rilegga.</p>
        <dl class="message-properties">
            <dt>topic
                <span class="property-type">stringa</span>
            </dt>
            <dd>Se un messaggio con topic <code>restartServer</code> è ricevuto, il nodo riavvia il server WEB interno. <code>msg.payload</code> non è usato.</dd>
        </dl>

        <p>Se il <code>msg.topic</code> è <code>reportState</code>, un aggiornamento dello stato di tutti i dispositivi verrà inviato a Alexa. Principalmente usato per test.</p>
        <dl class="message-properties">
            <dt>topic
                <span class="property-type">stringa</span>
            </dt>
            <dd>Se un messaggio con topic <code>reportState</code> è ricevuto, il nodo invierà un aggiornamento dello stato di tutti i dispositivi a Alexa. <code>msg.payload</code> non è usato.</dd>
        </dl>

        <p>Se il <code>msg.topic</code> è <code>getState</code>, il nodo invierà un messaggio in uscita con lo stato dei dispositivi.</p>
        <dl class="message-properties">
            <dt>topic
                <span class="property-type">stringa</span>
            </dt>
            <dd>Se un messaggio con topic <code>getState</code> è ricevuto, il nodo invierà un messaggio in uscita con lo stato dei dispositivi.</dd>
            <dl class="message-properties">
                <dt>payload
                    <span class="property-type">booleano|stringa|array of stringhe|oggetto</span>
                </dt>
                <dd><code>non specificato</code> invia in uscita lo stato di tutti i dispositivi Alexa in un oggetto con chiave gli id dei dispositivi o il nome in accordo alla configurazione del nodo.</dd>
                <dd><code>true</code> invia in uscita lo stato di tutti i dispositivi Alexa con il flag di persistenza abilitato in un oggetto con chiave gli id del dispositivo o il nome in accordo alla configurazione del nodo.</dd>
                <dd><code>stringa</code> invia in uscita lo stato del dispositivo Alexa con l'id o il nome specificato nel payload in un oggetto con chiave gli id o nome del dispositivo in accordo alla configurazione del nodo.</dd>
                <dd><code>array of stringhe</code> invia in uscita lo stato dei the dispositivi Alexa con gli id o i nomi specificati nel payload in un oggetto con chiave gli id o nome del dispositivo in accordo alla configurazione del nodo.</dd>
                <dd><code>oggetto</code> gli attributi dell'oggetto possono essere <code>onlyPersistent</code>, <code>useNames</code> or <code>devices</code>, invia in uscita lo stato di the dispositivi Alexa in accordo al payload ed alla configurazione del nodo.</dd>
            </dl>    
        </dl>

        <p>Se il <code>msg.topic</code> è <code>setState</code>, il nodo aggiorna lo stato di tutti i dispositivi con lo stato contenuto  nel <code>msg.payload</code>. Questo messaggio può essere usato per salvare su un dispositivo di memorizzazione lo stato di tutti i dispositivi.</p>
        <dl class="message-properties">
            <dt>topic
                <span class="property-type">oggetto</span>
            </dt>
            <dd>Se un messaggio con topic <code>setState</code> è ricevuto, il nodo aggiorna lo stato di tutti i dispositivi con il nuovo stato contenuto nel <code>msg.payload</code>. Questo messaggio può essere usato per ripristinare lo stato di tutti i dispositivi precedentemente su un dispositivo di memorizzazione.</dd>
        </dl>

        <h4>Messaggi in uscita</h4>
        <p>Questo nodo invierà in uscita un messaggio con alcune informazioni in caso qualcosa non funzioni oppure un messaggio con lo stato di tutti i dispositivi configurati (con <code>msg.topic</code> setState o getState topic e <code>msg.payload</code> contenente lo stato).</p>
        <dl class="message-properties">
            <dt>payload
                <span class="property-type">stringa|oggetto</span>
            </dt>
            <dd>Questo nodo invierà in uscita un messaggio con alcune informazioni in caso qualcosa non funzioni oppure un messaggio con lo stato di tutti i dispositivi configurati (con <code>msg.topic</code> setState o getState topic e <code>msg.payload</code> contenente lo stato)</dd>
        </dl>

        <p>Se lo stato di un dispositivo configurato cambia, questo nodo può inviare in uscita automaticamente un messaggio con <code>msg.topic</code> uguale a <code>setState</code>, ed il <code>msg.payload</code> contenente lo stato di tutti i dispositivi Alexa configurato. Questo messaggio può essere salvato se necessario. Il messaggio può essere passato in ingresso per ripristinare lo stato salvato precedentemente.</p>

    <h3>Riferimenti</h3>
        <ul>
            <li><a href="https://github.com/ckhmer1/node-red-contrib-alexa-virtual-smarthome#the-config-node">GitHub</a> - il link del progetto su GitHub</li>
        </ul>
</script>
